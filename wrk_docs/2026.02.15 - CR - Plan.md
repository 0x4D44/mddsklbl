# Code Review Plan — mddsklbl v1.1.0
**Date:** 2026-02-15

## Scope
Full review of all source code (~3,045 lines across 14 Rust files + build.rs), tests (4 files), CI workflows, installer script, and project configuration.

## Files Under Review

### Source (src/)
| File | LOC | Purpose |
|------|-----|---------|
| main.rs | 33 | Entry point, logging bootstrap |
| lib.rs | 16 | Module exports |
| windows_main.rs | 804 | Win32 window, message loop, wiring |
| overlay.rs | 559 | Layered-window renderer (DWrite/D2D with GDI fallback) |
| ui.rs | 410 | Modal input dialog |
| ipc.rs | 225 | Named-pipe IPC server |
| tray.rs | 213 | System tray icon and context menu |
| autorun.rs | 207 | Registry-based run-at-login toggle |
| config.rs | 185 | JSON schema, atomic save/load, migration |
| hotkeys.rs | 85 | Global hotkey registration |
| vd.rs | 56 | Virtual desktop detection (events + polling) |
| core.rs | 36 | Pure logic: visibility & positioning |
| utils.rs | 4 | UTF-16 conversion helper |

### Build & Config
| File | Purpose |
|------|---------|
| build.rs | Icon generation, manifest embedding, Windows resources |
| Cargo.toml | Package metadata and dependencies |
| app.manifest | DPI awareness manifest |
| .gitignore | Build artifact exclusions |

### Tests (tests/)
| File | Tests |
|------|-------|
| config_roundtrip.rs | Save/load roundtrip |
| hotkeys.rs | VK char mapping |
| hotkey_duplicates.rs | Duplicate detection |
| visibility.rs | Visibility truth table |

### CI/CD
| File | Purpose |
|------|---------|
| .github/workflows/ci.yml | Build + lint + test |
| .github/workflows/release.yml | Build + Inno Setup installer + GitHub Release |

### Installer
| File | Purpose |
|------|---------|
| installers/DesktopLabeler.iss | Inno Setup script |

## Review Dimensions

1. **Correctness** — Logic bugs, off-by-one errors, edge cases, error handling paths
2. **Safety** — Unsafe code audit, memory leaks, resource leaks, dangling pointers, UB risk
3. **Security** — Input validation, IPC attack surface, registry manipulation safety
4. **Architecture & Design** — Module boundaries, coupling, state management, re-entrancy
5. **Concurrency** — Thread safety, data races, deadlocks, message-passing correctness
6. **Error Handling** — Propagation strategy, silent failures, panic risk
7. **Testing** — Coverage gaps, test quality, edge case coverage
8. **Code Quality** — Duplication, dead code, naming, readability, idiomatic Rust
9. **Build & CI** — Dependency health, CI completeness, versioning consistency
10. **Documentation** — README accuracy, code comments, config documentation

## Execution Order
1. Verify build, lint, tests pass (DONE - all clean)
2. Review pure logic modules (core, config, hotkeys, utils)
3. Review Windows-specific modules (overlay, tray, ui, vd, autorun, ipc)
4. Review application wiring (windows_main, main, lib)
5. Review build system and CI
6. Cross-cutting concerns (safety, concurrency, error handling)
7. Synthesize findings into report
